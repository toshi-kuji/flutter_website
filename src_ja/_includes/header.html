{% assign route = page.url|regex_replace:'/index$|/index\.html$|\.html$|/$' %}

<header class="site-header">
  <nav class="navbar navbar-expand-md justify-content-start justify-content-md-between">
    <button 
      class="navbar-toggler" 
      type="button" 
      data-toggle="collapse" 
      data-target="#navbarSupportedContent" 
      aria-controls="navbarSupportedContent" 
      aria-expanded="false" 
      aria-label="Toggle navigation">
      <i class="material-icons">menu</i>
    </button>

    <a class="navbar-brand" href="{{site.main-url}}">
      <img 
        src='/assets/images/shared/brand/flutter/logo/flutter-lockup.png' 
        alt='Flutter logo' 
        height="37" 
        width="129" 
        class="align-middle">
    </a>

    <div 
      id="navbarSupportedContent"
      class="collapse navbar-collapse flex-grow-0">
      <div 
        class="site-header__sheet-bg" 
        data-toggle="collapse" 
        data-target="#navbarSupportedContent" 
        aria-controls="navbarSupportedContent" 
        aria-expanded="false" 
        aria-label="Toggle navigation">
      </div>
      <div class="site-header__sheet">
        <ul class="navbar-nav">
          <div class="site-sidebar site-sidebar--header d-md-none">
            {% include shared/sidenav-level-1.html nav=site.data.sidenav %}
          </div>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="navbarDropdown" 
               href="{{site.main-url}}/multi-platform" 
               role="button" data-toggle="dropdown" 
               aria-haspopup="true" aria-expanded="false">
               <!-- Multi-Platform -->
               マルチプラットフォーム
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="{{site.main-url}}/multi-platform/mobile">
                <!-- Mobile -->
                モバイル
              </a>
              <a class="dropdown-item" href="{{site.main-url}}/multi-platform/web">
                <!-- Web -->
                ウェブ
              </a>
              <a class="dropdown-item" href="{{site.main-url}}/multi-platform/desktop">
                <!-- Desktop -->
                デスクトップ
              </a>
              <a class="dropdown-item" href="{{site.main-url}}/multi-platform/embedded">
                <!-- Embedded -->
                組み込み機器
              </a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="navbarDropdown" 
               href="{{site.main-url}}/development"
               role="button" data-toggle="dropdown" 
               aria-haspopup="true" aria-expanded="false">
               <!-- Development -->
               開発
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="{{site.main-url}}/learn">
                <!-- Learn -->
                Flutter を学ぶ
              </a>
              <a class="dropdown-item" href="https://pub.dev/flutter/favorites" target="_blank">
                Flutter Favorites
              </a>
              <a class="dropdown-item" href="https://pub.dev/" target="_blank">
                <!-- Packages -->
                パッケージリポジトリ
              </a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="navbarDropdown" 
               href="{{site.main-url}}/ecosystem"
               role="button" data-toggle="dropdown" 
               aria-haspopup="true" aria-expanded="false">
               <!-- Ecosystem -->
               エコシステム
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="{{site.main-url}}/community">
                <!-- Community -->
                コミュニティ
              </a>
              <a class="dropdown-item" href="{{site.main-url}}/events">
                <!-- Events -->
                イベント
              </a>
              <a class="dropdown-item" href="{{site.main-url}}/monetization">
                <!-- Monetization -->
                収益化
              </a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{site.main-url}}/showcase">
              <!-- Showcase -->
              導入事例
            </a>
          </li>
          <li class="nav-item dropdown docs-item">
            <a class="nav-link dropdown-toggle{% if route == '/' %} active{% endif %}"
               id="navbarDropdown" 
               href="/"
               role="button" data-toggle="dropdown" 
               aria-haspopup="true" aria-expanded="false">
               <!-- Docs -->
               ドキュメント
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item {% if route == '/' %} active{% endif %}"
                 href="/whats-new">
                 <!-- What's New -->
                 リリース情報
                </a>
              <a class="dropdown-item {% if route contains '/get-started/editor' %} active{% endif %}"
                 href="/get-started/editor?tab=androidstudio">
                 <!-- Editor Support -->
                 エディタの設定
                </a>
              <a class="dropdown-item {% if route contains '/development/tools/hot-reload' %} active{% endif %}"
                 href="/development/tools/hot-reload">
                 <!-- Hot Reload -->
                 ホットリロード
                </a>
              <a class="dropdown-item {% if route contains '/perf/rendering/ui-performance' %} active{% endif %}"
                 href="/perf/rendering/ui-performance">
                 <!-- Profiling -->
                 プロファイリング
                </a>
              <a class="dropdown-item {% if route contains '/get-started/install' %} active{% endif %}"
                 href="/get-started/install">
                 <!-- Install Flutter -->
                 Flutter のインストール
                </a>
              <a class="dropdown-item {% if route contains '/development/tools/devtools' %} active{% endif %}"
                 href="/development/tools/devtools/overview">
                 Dev Tools
                </a>
              <a class="dropdown-item {% if route contains '/cookbook' %} active{% endif %}"
                 href="/cookbook">
                 <!-- Cookbook -->
                 クックブック
                </a>
              <a class="dropdown-item {% if route contains '/reference/tutorials' %} active{% endif %}"
                 href="/reference/tutorials">
                 <!-- Tutorials -->
                 チュートリアル
                </a>
            </div>
          </li>
        </ul>
        <form action="/search/" class="site-header__search form-inline">
          <input 
            class="site-header__searchfield form-control" 
            type="search" name="q" id="q" autocomplete="off" 
            placeholder="Search" aria-label="Search">
        </form>
      </div>
    </div>
    <div class="site-header__social navbar-nav flex-row">
      <a 
        class="nav-item nav-link" 
        href="{{site.social.twitter}}" 
        aria-label="Twittter">
        <i class="fab fa-twitter fa-lg"></i>
      </a>
      <a 
        class="nav-item nav-link" 
        href="{{site.social.youtube}}" 
        aria-label="YouTube">
        <i class="fab fa-youtube fa-lg"></i>
    </a>
      <a 
        class="nav-item nav-link" 
        href="{{site.repo.organization}}" 
        aria-label="Github">
        <i class="fab fa-github fa-lg"></i>
    </a>
    </div>
    {% if page.show-nav-get-started-button -%}
      <a 
        class="site-header__cta btn btn-primary" 
        href="/get-started/install/">
        <!-- Get started -->
        インストール
      </a>
    {% endif -%}
  </nav>
</header>
